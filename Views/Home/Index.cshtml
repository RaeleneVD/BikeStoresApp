@{
    ViewBag.Title = "Home - Bike Stores";
}

<div class="container mt-4">
    <div class="row">

        <!-- STAFF CARD -->
        <div class="col-md-4">
            <div class="card mb-3">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <span>Staff</span>
                    <button type="button" class="btn btn-success btn-sm" data-bs-toggle="modal" data-bs-target="#createStaffModal">Add</button>
                </div>
                <div class="card-body">
                    @{
                        var staff = ViewBag.Staffs[ViewBag.StaffIndex];
                    }
                    <p><strong>ID:</strong> @staff.staff_id</p>
                    <p><strong>Name:</strong> @staff.first_name @staff.last_name</p>
                    <p><strong>Sold Items:</strong></p>
                    <ul>
                        <li>Sold Item One</li>
                        <li>Sold Item Two</li>
                    </ul>
                </div>
                <div class="card-footer d-flex justify-content-between">
                    @if (ViewBag.StaffIndex > 0)
                    {
                        <a href="@Url.Action("Index", new { staffIndex = ViewBag.StaffIndex - 1, customerIndex = ViewBag.CustomerIndex, productIndex = ViewBag.ProductIndex })" class="btn btn-sm btn-primary">Prev</a>
                    }
                    @if (ViewBag.StaffIndex < ViewBag.Staffs.Count - 1)
                    {
                        <a href="@Url.Action("Index", new { staffIndex = ViewBag.StaffIndex + 1, customerIndex = ViewBag.CustomerIndex, productIndex = ViewBag.ProductIndex })" class="btn btn-sm btn-primary ms-auto">Next</a>
                    }
                </div>
            </div>
        </div>

        <!-- CUSTOMER CARD -->
        <div class="col-md-4">
            <div class="card mb-3">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <span>Customer</span>
                    <button type="button" class="btn btn-success btn-sm" data-bs-toggle="modal" data-bs-target="#createCustomerModal">Add</button>
                </div>
                <div class="card-body">
                    @{
                        var customer = ViewBag.Customers[ViewBag.CustomerIndex];
                    }
                    <p><strong>ID:</strong> @customer.customer_id</p>
                    <p><strong>Name:</strong> @customer.first_name @customer.last_name</p>
                    <p><strong>Purchased Items:</strong></p>
                    <ul>
                        <li>Purchased Item One</li>
                        <li>Purchased Item Two</li>
                    </ul>
                </div>
                <div class="card-footer d-flex justify-content-between">
                    @if (ViewBag.CustomerIndex > 0)
                    {
                        <a href="@Url.Action("Index", new { staffIndex = ViewBag.StaffIndex, customerIndex = ViewBag.CustomerIndex - 1, productIndex = ViewBag.ProductIndex })" class="btn btn-sm btn-primary">Prev</a>
                    }
                    @if (ViewBag.CustomerIndex < ViewBag.Customers.Count - 1)
                    {
                        <a href="@Url.Action("Index", new { staffIndex = ViewBag.StaffIndex, customerIndex = ViewBag.CustomerIndex + 1, productIndex = ViewBag.ProductIndex })" class="btn btn-sm btn-primary ms-auto">Next</a>
                    }
                </div>
            </div>
        </div>

        <!-- PRODUCT CARD -->
        <div class="col-md-4">
            <div class="card mb-3">
                <div class="card-header">
                    <form method="get" class="d-flex align-items-center">
                        <label class="me-2">Brand:</label>
                        <select name="brandId" class="form-select me-2">
                            <option value="">All Brands</option>
                            @foreach (var brand in ViewBag.Brands)
                            {
                                <option value="@brand.brand_id">@brand.brand_name</option>
                            }
                        </select>

                        <label class="me-2">Category:</label>
                        <select name="categoryId" class="form-select me-2">
                            <option value="">All Categories</option>
                            @foreach (var category in ViewBag.Categories)
                            {
                                <option value="@category.category_id">@category.category_name</option>
                            }
                        </select>

                        <button type="submit" class="btn btn-primary btn-sm">Filter</button>
                    </form>
                </div>
                <div class="card-body">
                    @{
                        var products = ViewBag.Products as List<BikeStoresApp.Models.product>;
                        BikeStoresApp.Models.product product = null;

                        if (products != null && products.Count > 0)
                        {
                            product = products[ViewBag.ProductIndex];
                        }
                    }
                    @if (product != null)
                    {
                        <p><strong>ID:</strong> @product.product_id</p>
                        <p><strong>Name:</strong> @product.product_name</p>
                        <p><strong>Brand:</strong> @product.brand.brand_name</p>
                        <p><strong>Category:</strong> @product.category.category_name</p>
                        <p><strong>Price:</strong> $@product.list_price</p>
                    }
                    else
                    {
                        <p>No products found.</p>
                    }

                </div>
                <div class="card-footer d-flex justify-content-between">
                    @if (ViewBag.ProductIndex > 0)
                    {
                        <a href="@Url.Action("Index", new { staffIndex = ViewBag.StaffIndex, customerIndex = ViewBag.CustomerIndex, productIndex = ViewBag.ProductIndex - 1 })" class="btn btn-sm btn-primary">Prev</a>
                    }
                    @if (ViewBag.ProductIndex < ViewBag.Products.Count - 1)
                    {
                        <a href="@Url.Action("Index", new { staffIndex = ViewBag.StaffIndex, customerIndex = ViewBag.CustomerIndex, productIndex = ViewBag.ProductIndex + 1 })" class="btn btn-sm btn-primary ms-auto">Next</a>
                    }
                </div>
            </div>
        </div>

    </div>
</div>

<!-- CREATE STAFF MODAL -->
<div class="modal fade" id="createStaffModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Create New Staff Member</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                @Html.Partial("CreateStaff", new BikeStoresApp.Models.staff(), new ViewDataDictionary {
                    { "Stores", ViewBag.Stores },
                    { "Managers", ViewBag.Managers }
                })
            </div>
        </div>
    </div>
</div>

<!-- CREATE CUSTOMER MODAL -->
<div class="modal fade" id="createCustomerModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Create New Customer</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                @Html.Partial("CreateCustomer", new BikeStoresApp.Models.customer())
            </div>
        </div>
    </div>
</div>
